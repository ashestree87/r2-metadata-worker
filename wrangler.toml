# Top-level configuration
name = "r2-metadata-worker"
main = "src/index.ts"
compatibility_date = "202-04-28" # Or the date generated by wrangler init

# Add this section for R2 binding
[[r2_buckets]]
binding = "nodo-media" # This is the name your worker will use to access the bucket
bucket_name = "nodo-media" # Replace with your actual R2 bucket name
# preview_bucket_name = "nodo-media-dev # Optional: Use a different bucket for wrangler dev

# Add this section for the scheduled trigger
[triggers]
# Run the worker once a day at midnight UTC
crons = ["0 0 * * *"]

# Add this section to allow HTTP requests to external APIs like OpenAI
[dev]
remote = true # Allows wrangler dev to access external services

# You might also need to add account_id if it's not already there
account_id = "49ef1ba682ad8cfd720c86699ae17521"